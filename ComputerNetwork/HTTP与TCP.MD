# HTTP 与 TCP

## 一、计算机网络的模型
1. 所谓的计算机网络的模型，实际上仅仅是一种抽象。
2. 以HTTP请求为例，HTTP假定下层协议能够提供可靠的传输（例如TCP，或者加了某种机制的UDP），而这种可靠的传输实际上是建立在IP协议之上的，IP协议的本质就是根据IP地址进行数据的传输，IP协议不需要与目的主机建立好特定的通路，IP协议提供的是不可靠的数据包传输机制，也就是尽最大努力交付的数据包传输机制；IP数据包在到达的时候可能已经损坏或者乱序。
3. 简单来说，目前对计算机网络协议的理解如下
   > 物理层保证了机器之间是互相连接的，是有一条电磁信号通路可达的  
   > 数据链路层保证了导线两端的数据传输，本质上是点对点传输  
   > 网络层提供了路由和寻址的功能，使得两个终端之间可以互相连接并决定最佳路径  
   > 传输层提供了应用进程之间的端到端服务  
   > 应用层直接和应用程序耦合，代表了一种对下层资源的使用  
4. 举个例子：
   > 物理层确保了A和B机器之间确实是有一条实实在在的线可达的  
   > 数据链路层保证了导线两端的数据传输，本质上是点对点传输  
   > 网络层借助数据链路层提供的能力，为设备编码IP地址  
   > 传输层在网络层的基础之上，新加了重传、拥塞控制等各种功能，在两个指定的端口上进行数据通信  
   > 应用层规定了传输层要使用的端口，作为一种约定俗称的规范
5. 其实所谓的分层协议，不过是上一层对下一层的细化设计；  
   - 应用层计划使用HTTP协议发送“你好”，这实际上是说，可以向服务器的80端口发送请求建立针对目标服务器80端口的TCP连接来实现数据传输；  
   - 至于TCP协议依赖于IP协议而生存，TCP协议在IP协议的基础上，添加数据包的序号来保证最终收到数据是有序的，进而保证TCP承诺的可靠性；  
   - IP协议则是基于数据链路层的MAC地址进行的寻址，IP地址是一种逻辑上的抽象规范，而MAC地址是物理设备上的物理规范，利用ARP协议将MAC地址与IP地址绑定在一起，当IP层希望寻找某一个IP时，就先借助MAC层的物理地址进行广播，根据回复来实现IP寻址，因此IP层的实现离不开数据链路层的寻址过程；  
   - 数据链路层则是借助了物理层真实的电磁信号实现了信息的传输。

## 二、TCP与HTTP的关系
1. 在上层浏览器向服务器发送请求的过程中，HTTP请求与TCP三次握手、四次握手的联系究竟是怎样的？
   > 根据上述分析，HTTP实际上只不过是约定了要访问的端口号，TCP进行三次握手和四次挥手的目标端口号是HTTP协议规定的，因此可以理解为先进行了TCP的三次握手建立了TCP通信才发送的HTTP具体数据。
2. HTTP不仅仅局限于使用TCP，HTTP也可以借助UDP实现。